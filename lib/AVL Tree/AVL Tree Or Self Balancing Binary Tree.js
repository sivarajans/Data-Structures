"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.TreeNode=void 0;function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var TreeNode=function TreeNode(value){_classCallCheck(this,TreeNode),this.value=value,this.left=null,this.right=null};exports.TreeNode=TreeNode;var SelfBalancedTree=function(){function SelfBalancedTree(){_classCallCheck(this,SelfBalancedTree),this.root=null,this.size=0}return _createClass(SelfBalancedTree,[{key:"add",value:function add(node){null==this.root?this.root=node:this._add(this.root,node),this.size++,this.balancing(this.root)}},{key:"_add",value:function _add(root,node){node.value<root.value?null==root.left?root.left=node:this._add(root.left,node):node.value>root.value&&(null==root.right?root.right=node:this._add(root.right,node))}},{key:"findBalanceFactor",value:function findBalanceFactor(node){if(null==node)return 0;var leftDepth=null==node.left?0:this.depthOfNode(node.left),rightDepth=null==node.right?0:this.depthOfNode(node.right);return rightDepth-leftDepth}},{key:"balancing",value:function balancing(node){var bf=this.findBalanceFactor(node);if(-2==bf){var lf=this.findBalanceFactor(node.left);-1>=lf?this.leftLeftCase(node):1<=lf&&this.leftRightCase(node)}else if(2==bf){var rf=this.findBalanceFactor(node.right);-1>=rf?this.rightLeftCase(node):1<=rf&&this.rightRightCase(node)}}},{key:"depthOfNode",value:function depthOfNode(node){if(null==node)return 0;var leftSide=this.depthOfNode(node.left),rightSide=this.depthOfNode(node.right);return Math.max(leftSide,rightSide)+1}},{key:"leftLeftCase",value:function leftLeftCase(node){this.root=this.rightRotation(node)}},{key:"leftRightCase",value:function leftRightCase(node){node.left=this.leftRotation(node.left),this.leftLeftCase(node)}},{key:"rightRightCase",value:function rightRightCase(node){this.root=this.leftRotation(node)}},{key:"rightLeftCase",value:function rightLeftCase(node){node.right=this.rightRotation(node.right),this.rightRightCase(node)}},{key:"rightRotation",value:function rightRotation(node){var newroot=node.left;return node.left=newroot.right,newroot.right=node,newroot}},{key:"leftRotation",value:function leftRotation(node){var newroot=node.right;return node.right=newroot.left,newroot.left=node,newroot}}]),SelfBalancedTree}();exports["default"]=SelfBalancedTree;